<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Screen Recorder</title>
<script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","author":{"@type":"Person","name":"Johnny Heggelund"}}</script>
<style>
:root {
--primary: #3498db;
--danger: #e74c3c;
--dark: #121212;
--panel: #252525;
--text: #ffffff;
--radius: 20px;
}
body {
margin: 0;
background-color: var(--dark);
color: var(--text);
font-family: system-ui, -apple-system, sans-serif;
height: 100vh;
display: flex;
justify-content: center;
align-items: center;
overflow: hidden;
}
.app-container {
width: 90%;
max-width: 1100px;
max-height: 95vh;
display: flex;
flex-direction: column;
gap: 25px;
}
#video-wrapper {
position: relative;
width: 100%;
max-height: 55vh;
aspect-ratio: 16 / 9;
background: #000;
border-radius: var(--radius);
box-shadow: 0 15px 40px rgba(0,0,0,0.5);
overflow: hidden;
margin: 0 auto;
}
video {
width: 100%;
height: 100%;
object-fit: contain;
display: block;
}
#timer-display {
display: none;
position: absolute;
top: 20px;
left: 50%;
transform: translateX(-50%);
font-size: 32px;
font-weight: bold;
color: var(--text);
background: var(--danger);
padding: 5px 20px;
border-radius: 50px;
box-shadow: 0 5px 15px rgba(231, 76, 60, 0.4);
z-index: 100;
font-variant-numeric: tabular-nums;
}
#countdown-overlay {
position: absolute;
inset: 0;
background: rgba(0,0,0,0.85);
display: none;
justify-content: center;
align-items: center;
flex-direction: column;
z-index: 200;
backdrop-filter: blur(5px);
}
#countdown-text {
font-size: 120px;
font-weight: bold;
color: var(--primary);
text-shadow: 0 0 30px var(--primary);
}
.status-badge {
position: absolute;
top: 15px;
right: 15px;
display: flex;
align-items: center;
gap: 10px;
background: rgba(0,0,0,0.7);
padding: 8px 15px;
border-radius: 30px;
backdrop-filter: blur(5px);
}
.rec-dot {
width: 12px;
height: 12px;
background-color: var(--danger);
border-radius: 50%;
display: none;
box-shadow: 0 0 15px var(--danger);
animation: pulse 1.5s infinite;
}
@keyframes pulse { 0% { opacity: 1; } 50% { opacity: 0.4; } 100% { opacity: 1; }}
.controls-wrapper {
background: var(--panel);
padding: 25px;
border-radius: var(--radius);
box-shadow: 0 10px 30px rgba(0,0,0,0.2);
display: flex;
flex-direction: column;
gap: 20px;
z-index: 50;
}
.settings-grid {
display: grid;
grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
gap: 15px;
}
.setting-group {
display: flex;
flex-direction: column;
gap: 8px;
}
label {
font-size: 11px;
color: #aaa;
font-weight: 700;
text-transform: uppercase;
letter-spacing: 1px;
}
select {
padding: 12px;
border-radius: 10px;
border: 1px solid #3a3a3a;
background-color: #1a1a1a;
color: white;
font-size: 14px;
outline: none;
transition: all 0.2s;
cursor: pointer;
}
select:focus, select:hover {
border-color: var(--primary);
background-color: #222;
}
.action-bar {
display: flex;
justify-content: center;
gap: 20px;
padding-top: 10px;
border-top: 1px solid #333;
}
button {
padding: 14px 40px;
border: none;
border-radius: 12px;
font-size: 16px;
font-weight: 700;
cursor: pointer;
transition: all 0.2s;
text-transform: uppercase;
letter-spacing: 0.5px;
}
button:hover { filter: brightness(1.1); transform: translateY(-2px); }
button:active { transform: translateY(0px) scale(0.98); }
#btn-start { background-color: var(--primary); color: white; box-shadow: 0 5px 15px rgba(52, 152, 219, 0.3); }
#btn-stop { background-color: var(--danger); color: white; display: none; box-shadow: 0 5px 15px rgba(231, 76, 60, 0.3); }
</style>
</head>
<body>
<main class="app-container">
<div id="video-wrapper">
<video id="preview" autoplay muted></video>
<div id="timer-display">00:00:00</div>
<div class="status-badge">
<div class="rec-dot" id="rec-dot"></div>
<span id="status-text" style="font-size: 13px; font-weight: 500;">Ready</span>
</div>
<div id="countdown-overlay">
<div id="countdown-text">5</div>
</div>
</div>
<div class="controls-wrapper">
<div class="settings-grid" id="settings-panel">
<div class="setting-group">
<label>Resolution</label>
<select id="opt-resolution">
<option value="1080" selected>1080p (FHD)</option>
<option value="720">720p (HD)</option>
<option value="screen">Native (Max)</option>
</select>
</div>
<div class="setting-group">
<label>Framerate</label>
<select id="opt-fps">
<option value="24">24 FPS</option>
<option value="30" selected>30 FPS</option>
<option value="60">60 FPS</option>
</select>
</div>
<div class="setting-group">
<label>Audio Source</label>
<select id="opt-audio">
<option value="system">System Sound</option>
<option value="mic">Microphone</option>
<option value="both">Mix (Both)</option>
<option value="none">No Audio</option>
</select>
</div>
<div class="setting-group">
<label>Cursor</label>
<select id="opt-cursor">
<option value="always" selected>Visible</option>
<option value="never">Hidden</option>
</select>
</div>
<div class="setting-group">
<label>Auto-Stop</label>
<select id="opt-autostop">
<option value="0" selected>Manual</option>
<option value="30">30 Mins</option>
<option value="60">1 Hour</option>
<option value="120">2 Hours</option>
</select>
</div>
</div>
<div class="action-bar">
<button id="btn-start">Start Recording</button>
<button id="btn-stop">Stop & Save</button>
</div>
</div>
</main>
<script>
const preview = document.getElementById('preview');
const timerDisplay = document.getElementById('timer-display');
const statusText = document.getElementById('status-text');
const recDot = document.getElementById('rec-dot');
const countdownOverlay = document.getElementById('countdown-overlay');
const countdownText = document.getElementById('countdown-text');
const settingsPanel = document.getElementById('settings-panel');
const startBtn = document.getElementById('btn-start');
const stopBtn = document.getElementById('btn-stop');
let mediaRecorder, mixedStream, fileHandle, writableStream, timerInterval, startTime, autoStopTimeout, audioContext;
function getConstraints() {
const resVal = document.getElementById('opt-resolution').value;
const fpsVal = parseInt(document.getElementById('opt-fps').value);
let width, height;
if (resVal === '1080') { width = 1920; height = 1080; }
else if (resVal === '720') { width = 1280; height = 720; }
else { width = 9999; height = 9999; }
return {
video: { width: { ideal: width }, height: { ideal: height }, frameRate: { ideal: fpsVal }, cursor: document.getElementById('opt-cursor').value, resizeMode: "none" },
audio: { echoCancellation: false, noiseSuppression: false, autoGainControl: false, sampleRate: 48000 }
};
}
function getBitrate(fps, resStr) {
let base = (resStr === '1080' || resStr === 'screen') ? 6000000 : 3500000;
return Math.floor(base * (fps >= 60 ? 1.8 : 1));
}
startBtn.addEventListener('click', async () => {
try {
const constraints = getConstraints();
const audioChoice = document.getElementById('opt-audio').value;
const captureSystemAudio = audioChoice !== 'mic' && audioChoice !== 'none';
let screenStream = await navigator.mediaDevices.getDisplayMedia({
video: constraints.video,
audio: captureSystemAudio ? constraints.audio : false
});
const videoTrack = screenStream.getVideoTracks()[0];
if ('contentHint' in videoTrack) videoTrack.contentHint = 'detail';
videoTrack.onended = () => stopRecording();
mixedStream = new MediaStream();
screenStream.getVideoTracks().forEach(track => mixedStream.addTrack(track));
if (audioChoice !== 'none') {
audioContext = new AudioContext();
const destination = audioContext.createMediaStreamDestination();
let hasAudio = false;
if (screenStream.getAudioTracks().length > 0) {
audioContext.createMediaStreamSource(screenStream).connect(destination);
hasAudio = true;
}
if (audioChoice === 'mic' || audioChoice === 'both') {
try {
const micStream = await navigator.mediaDevices.getUserMedia({ audio: { echoCancellation: false, noiseSuppression: true } });
audioContext.createMediaStreamSource(micStream).connect(destination);
hasAudio = true;
} catch (e) { console.warn("Mic failed:", e); }
}
if (hasAudio) destination.stream.getAudioTracks().forEach(track => mixedStream.addTrack(track));
}
const now = new Date();
const filename = `rec_${constraints.video.height.ideal}p_${constraints.video.frameRate.ideal}fps_${now.toISOString().slice(0,19).replace(/:/g,"-")}.webm`;
fileHandle = await window.showSaveFilePicker({ suggestedName: filename, types: [{ description: 'WebM Video', accept: {'video/webm': ['.webm']} }] });
writableStream = await fileHandle.createWritable();
preview.srcObject = mixedStream;
startCountdown();
} catch (err) { console.error("Startup failed:", err); }
});
function startCountdown() {
settingsPanel.style.pointerEvents = 'none'; settingsPanel.style.opacity = '0.5';
startBtn.style.display = 'none'; countdownOverlay.style.display = 'flex';
let timeLeft = 5;
countdownText.innerText = timeLeft;
const timer = setInterval(() => {
timeLeft--;
if (timeLeft > 0) countdownText.innerText = timeLeft;
else { clearInterval(timer); countdownOverlay.style.display = 'none'; beginRecording(); }
}, 1000);
}
function beginRecording() {
const fps = document.getElementById('opt-fps').value;
const res = document.getElementById('opt-resolution').value;
const mimeType = MediaRecorder.isTypeSupported("video/webm;codecs=vp9") ? "video/webm;codecs=vp9" : "video/webm";
mediaRecorder = new MediaRecorder(mixedStream, { mimeType: mimeType, videoBitsPerSecond: getBitrate(fps, res) });
mediaRecorder.ondataavailable = async (e) => { if (e.data.size > 0 && writableStream) await writableStream.write(e.data); };
mediaRecorder.start(1000);
stopBtn.style.display = 'block'; recDot.style.display = 'block'; timerDisplay.style.display = 'block';
statusText.innerText = "Recording"; statusText.style.color = "#e74c3c";
startTimer();
const autoStopMins = parseInt(document.getElementById('opt-autostop').value);
if (autoStopMins > 0) autoStopTimeout = setTimeout(() => { stopRecording(); alert(`Auto-stopped after ${autoStopMins} mins.`); }, autoStopMins * 60 * 1000);
}
stopBtn.addEventListener('click', stopRecording);
async function stopRecording() {
if (!mediaRecorder || mediaRecorder.state === "inactive") return;
clearTimeout(autoStopTimeout); clearInterval(timerInterval);
mediaRecorder.stop();
if (mixedStream) mixedStream.getTracks().forEach(track => track.stop());
if (audioContext) audioContext.close();
if (writableStream) await writableStream.close();
recDot.style.display = 'none'; stopBtn.style.display = 'none'; startBtn.style.display = 'block';
timerDisplay.style.display = 'none'; settingsPanel.style.pointerEvents = 'all'; settingsPanel.style.opacity = '1';
statusText.innerText = "Saved!"; statusText.style.color = "#2ecc71";
setTimeout(() => location.reload(), 2000);
}
function startTimer() {
startTime = Date.now();
timerInterval = setInterval(() => { timerDisplay.innerText = formatTime(Date.now() - startTime); }, 1000);
}
function formatTime(ms) {
const s = Math.floor(ms / 1000); return `${pad(Math.floor(s / 3600))}:${pad(Math.floor((s % 3600) / 60))}:${pad(s % 60)}`;
}
function pad(n) { return n.toString().padStart(2, '0'); }
</script>
</body>
</html>